package com.formacionbdi.microservicios.app.respuestas.services;

import org.springframework.data.repository.query.Param;

import com.formacionbdi.microservicios.app.respuestas.models.entity.Respuesta;

public interface RespuestaService {
	
	/*
	 * Cuando el alumno responde las preguntas, lo que hace es enviar un monton
	 * de preguntas que estan relacionadas con el examen; por lo tanto, el controlador
	 * va a recibir una lista de respuestas, todas relacionadas con el examen.
	 * 
	 * Por tanto, este service y en el controlador va a guardar varias 
	 * respuestas «guardarTodo»
	 */
	public Iterable<Respuesta> guardarTodo(Iterable<Respuesta> respuestas);
	
	
	public Iterable<Respuesta> findRespuestaByAlumnoByExamen(Long alumnoId, Long examenId);
	
	/*@Query("SELECT e.id "
			+ "FROM Respuesta r "
			+ "JOIN r.pregunta p "
			+ "JOIN p.examen e "
			+ "WHERE r.alumnoId = :alumnoId "
			+ "GROUP BY e.id")*/
	public Iterable<Long> findExamenesIdsConRespuestasByAlumno(@Param("alumnoId") Long alumnoId);

}
